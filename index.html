<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hydrogen Fixer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Background Animation */
    @keyframes bgMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    body {
      @apply m-0 p-0 font-sans;
      background: linear-gradient(135deg, #0f172a, #1e293b, #0f172a);
      background-size: 400% 400%;
      animation: bgMove 20s ease infinite;
    }
    /* Card Animations */
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    .fade-in-up {
      animation: fadeInUp 0.8s ease-out forwards;
    }
    /* Button Hover Glow */
    .futuristic-btn {
      @apply transition-all duration-300 ease-out border-2 border-transparent rounded-xl;
    }
    .futuristic-btn:hover {
      @apply border-cyan-400 bg-cyan-600/20 shadow-[0_0_15px_rgba(0,255,255,0.4)];
    }
    /* Modal Overlay */
    .overlay {
      @apply fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50;
    }

  @keyframes slideIn {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  @keyframes slideOut {
    0% { opacity: 1; transform: translateY(0); }
    100% { opacity: 0; transform: translateY(20px); }
  }

  .slide-in {
    animation: slideIn 0.4s ease-out forwards;
  }

  .slide-out {
    animation: slideOut 0.4s ease-in forwards;
  }

  </style>
</head>
<body class="flex items-center justify-center min-h-screen text-white">
  <!-- Main Container -->
  <div class="relative max-w-lg w-full p-8 bg-white/5 backdrop-blur-md border border-white/20 rounded-3xl shadow-2xl fade-in-up">
    <div class="flex flex-col items-center space-y-4">
      <!-- Logo -->
      <div class="relative w-20 h-20">
        <svg class="absolute inset-0 w-full h-full text-cyan-400 drop-shadow-lg animate-[pulse_2s_ease-in-out_infinite]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M12 2C12 2 5 10 5 15C5 19.4183 8.5817 23 13 23C17.4183 23 21 19.4183 21 15C21 10 12 2 12 2Z"/>
        </svg>
      </div>
      <h1 class="text-4xl font-etrabold tracking-tight">Hydrogen Fixer</h1>
      <!-- Menu Buttons -->
      <div class="w-full grid grid-cols-1 gap-4 mt-4">
        <button onclick="openPanel('helper')" class="futuristic-btn w-full py-3 bg-indigo-600 text-lg font-semibold">Helper</button>
        <button onclick="openPanel('fixer')" class="futuristic-btn w-full py-3 bg-purple-600 text-lg font-semibold">Fixer</button>
        <button onclick="openDocs()" class="futuristic-btn w-full py-3 bg-gray-700 text-lg font-semibold">Documentation</button>
      </div>
    </div>
  </div>

  <!-- Helper Panel -->
  <div id="helper" class="overlay hidden">
    <div class="bg-gray-900/95 p-8 rounded-2xl max-w-md w-full space-y-6 fade-in-up">
      <h2 class="text-2xl font-bold text-center">Helper Options</h2>
      <div class="grid grid-cols-1 gap-4">
        <div onclick="openRoblox()" class="futuristic-btn p-4 bg-indigo-700 hover:bg-indigo-800 cursor-pointer">
          <h3 class="text-lg font-semibold">Open Roblox</h3>
          <p class="text-white/60 text-sm">Launch Roblox application</p>
        </div>
        <div onclick="UninstallAll()" class="futuristic-btn p-4 bg-indigo-700 hover:bg-indigo-800 cursor-pointer">
          <h3 class="text-lg font-semibold">Uninstall All</h3>
          <p class="text-white/60 text-sm">Uninstall all of Hydrogen and Roblox products - DO THIS ONLY IF YOU DONT WANT HYDROGEN</p>
        </div>
        <div onclick="scriptFinder()" class="futuristic-btn p-4 bg-indigo-700 hover:bg-indigo-800 cursor-pointer">
          <h3 class="text-lg font-semibold">Find Scripts</h3>
          <p class="text-white/60 text-sm">Sends you to a community scripthub w/ lots of scripts!</p>
        </div>
        <div onclick="installHydrogen()" class="futuristic-btn p-4 bg-indigo-700 hover:bg-indigo-800 cursor-pointer">
          <h3 class="text-lg font-semibold">Install Hydrogen‑M</h3>
          <p class="text-white/60 text-sm">Download & setup Hydrogen‑M</p>
        </div>
      </div>
      <button onclick="closePanel('helper')" class="mt-6 w-full py-3 bg-red-600 text-lg font-semibold rounded-xl hover:bg-red-700">Close</button>
    </div>
  </div>

  <!-- Fixer Panel -->
  <div id="fixer" class="overlay hidden">
    <div class="bg-gray-900/95 p-8 rounded-2xl max-w-md w-full space-y-6 fade-in-up">
      <h2 class="text-2xl font-bold text-center">Fixer Options</h2>
      <div class="grid grid-cols-1 gap-4">
        <div onclick="checkSysReq()" class="futuristic-btn p-4 bg-purple-700 hover:bg-purple-800 cursor-pointer">
          <h3 class="text-lg font-semibold">System Requirements</h3>
          <p class="text-white/60 text-sm">Verify you have the macOS version & architecture that supports Hydrogen</p>
        </div>
        <div onclick="fixSuddenClose()" class="futuristic-btn p-4 bg-purple-700 hover:bg-purple-800 cursor-pointer">
          <h3 class="text-lg font-semibold">Fix Sudden Close</h3>
          <p class="text-white/60 text-sm">Prevent abrupt shutdowns</p>
        </div>
        <div onclick="fixCrash()" class="futuristic-btn p-4 bg-purple-700 hover:bg-purple-800 cursor-pointer">
          <h3 class="text-lg font-semibold">Fix Crashing</h3>
          <p class="text-white/60 text-sm">Learn why your Roblox crashes after execution.</p>
        </div>
        <div onclick="fixPortBinding()" class="futuristic-btn p-4 bg-purple-700 hover:bg-purple-800 cursor-pointer">
          <h3 class="text-lg font-semibold">Fix Port Binding</h3>
          <p class="text-white/60 text-sm">Open required ports</p>
        </div>
        <div onclick="fixPasswordPrompt()" class="futuristic-btn p-4 bg-purple-700 hover:bg-purple-800 cursor-pointer">
          <h3 class="text-lg font-semibold">Fix "Password" Terminal Prompt</h3>
          <p class="text-white/60 text-sm">How to fix when it says "Password" in Terminal</p>
          </div>
          <div onclick="sudoadmin()" class="futuristic-btn p-4 bg-purple-700 hover:bg-purple-800 cursor-pointer">
            <h3 class="text-lg font-semibold">Fix [USER] is not in sudoers file statement in terminal</h3>
            <p class="text-white/60 text-sm">Fixes adminstrator powers so you can install Hydrogen</p>
        </div>
      </div>
      <button onclick="closePanel('fixer')" class="mt-6 w-full py-3 bg-red-600 text-lg font-semibold rounded-xl hover:bg-red-700">Close</button>
    </div>
  </div>

  <script>
   let currentlyOpen = null;

function openPanel(id) {
  if (currentlyOpen === id) {
    closePanel(id);
    return;
  }

  if (currentlyOpen) {
    const oldPanel = document.getElementById(currentlyOpen);
    oldPanel.classList.remove('slide-in');
    oldPanel.classList.add('slide-out');

    setTimeout(() => {
      oldPanel.classList.add('hidden');
      oldPanel.classList.remove('slide-out');

      // Now open the new one
      const newPanel = document.getElementById(id);
      newPanel.classList.remove('hidden');
      newPanel.classList.add('slide-in');
      currentlyOpen = id;
    }, 400);
  } else {
    const newPanel = document.getElementById(id);
    newPanel.classList.remove('hidden');
    newPanel.classList.add('slide-in');
    currentlyOpen = id;
  }
}

function closePanel(id) {
  const panel = document.getElementById(id);
  panel.classList.remove('slide-in');
  panel.classList.add('slide-out');

  setTimeout(() => {
    panel.classList.add('hidden');
    panel.classList.remove('slide-out');
    currentlyOpen = null;
  }, 400);
}

  
    function openRoblox() {
    const command = 'open /Applications/Roblox.app';
    window.electron.run(command)
      .then(result => {
        alert('Roblox opened successfully.');
      })
      .catch(error => {
        alert('Failed to open Roblox. Please try again.');
      });
  }

  function sudoadmin() {
  const script = `
    osascript -e '
      do shell script "
        USER=\\\"$(whoami)\\\"
        echo \\\"Adding $USER to admin group...\\\"
        dseditgroup -o edit -a $USER -t user admin
        echo \\\"$USER  ALL=(ALL) NOPASSWD:ALL\\\" > /private/etc/sudoers.d/$USER
        chmod 0440 /private/etc/sudoers.d/$USER
        echo \\\"✅ Done. $USER now has sudo access.\\\"
      " with administrator privileges
    '
  `;

  window.electron.run(script)
    .then(() => {
      alert("✅ Sudo access granted for this user.");
    })
    .catch(error => {
      alert("❌ Failed to gain sudo access: " + error.message);
    });
}

  function UninstallAll() {
  const command = `
    rm -rf "/Applications/Roblox.app"
    rm -rf "/Applications/Hydrogen-M.app"
  `;
  window.electron.run(command)
    .then(result => {
      alert('Uninstalled successfully.');
    })
    .catch(error => {
      alert('Failed to uninstall. Please try again.');
    });
}


  function scriptFinder() {
    window.open('scriptblox.com')
  }

  function installHydrogen() {
    const command = `
      osascript -e '
        set HYD_CMD to "curl -fsSL https://0ai4bbbahf.ufs.sh/f/4fzhZqSSYIjmUZpbE5XAgLkF67GUQ3DTbxjXyp052lYrBi8M | bash"
        tell application "Terminal"
          activate
          do script HYD_CMD
        end tell
      '
    `;
    window.electron.run(command)
      .then(result => {
        alert('Hydrogen installed successfully.');
      })
      .catch(error => {
        alert('Failed to install Hydrogen. Please try again.');
      });
  }

  function checkSysReq() {
    const command = `
      osascript -e '
        set v to system version of (system info)
        set arch to do shell script "uname -m"
        try
          set robloxArch to do shell script "lipo -archs /Applications/Roblox.app/Contents/MacOS/Roblox"
        on error
          return "Roblox not found"
        end try

        if v < "11.0" then
          return "macOS 11+ required. You are on " & v
        else if arch is not equal to robloxArch then
          return "Mismatch: System = " & arch & ", Roblox = " & robloxArch
        else
          return "Roblox architecture matches system. (" & arch & ")"
        end if
      '
    `;
    window.electron.run(command)
      .then(result => {
        alert(result.trim());
      })
      .catch(error => {
        alert('Error while checking Roblox architecture.');
      });
  }

  function fixSuddenClose() {
    alert('To fix sudden close: reinstall Hydrogen. If that doesn’t work, restart your Mac.');
  }

  function fixCrash() {
    alert('To fix crashing:\n1. Check if your script is obfuscated — that may cause it.\n2. If you’re on Intel, crashing may happen more often.');
  }

  function fixPortBinding() {
    alert('To fix port binding reinstall Hydrogen press "Ok" to proceed');
    const command = `
      osascript -e '
        set HYD_CMD to "curl -fsSL https://0ai4bbbahf.ufs.sh/f/4fzhZqSSYIjmUZpbE5XAgLkF67GUQ3DTbxjXyp052lYrBi8M | bash"
        tell application "Terminal"
          activate
          do script HYD_CMD
        end tell
      '
    `;
    window.electron.run(command)
  }

  function fixPasswordPrompt() {
    alert('When Terminal says "Password", just type your password and hit Enter.\nMacOS hides what you type for security.');
  }

  function openDocs() {
    window.open('https://github.com/redivancee/HydrogenIssues');
  }
</script>
